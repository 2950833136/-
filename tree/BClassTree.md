# B 类树 



## 1. B 树

B树（英语：B-tree）是一种自平衡的树，能够保持数据有序。B树和平衡二叉树稍有不同的是B树属于多叉树又名平衡多路查找树（查找路径不只两个）。

鲁道夫·拜尔（Rudolf Bayer）和 艾华·M·麦克雷（Ed M. McCreight）于1972年在波音研究实验室（Boeing Research Labs）工作时发明了B 树，高德纳（Donald Knuth） 在他1980年5月发表的题为“CS144C classroom lecture about disk storage and B-trees”的论文中推测了B树的名字取义，提出“B”可能意味Boeing 或者Bayer 的名字。

### 1.1 定义

根据 Knuth 的定义，一个 m 阶的 B 树是一个有以下属性的树：

1. 每一个节点最多有 *m* 个子节点
2. 每一个非叶子节点（除根节点）最少有 ⌈m/2⌉ 个子节点
3. 如果根节点不是叶子节点，那么它至少有两个子节点
4. 有 k 个子节点的非叶子节点拥有 k − 1 个键
5. 所有的叶子节点都在同一层

每一个内部节点的键将节点的子树分开。例如，如果一个内部节点有3个子节点（子树），那么它就必须有两个键： $a1$和 $a2$ 。左边子树的所有值都必须小于 $a1$ ，中间子树的所有值都必须在 $a1$ 和 $a2$ 之间，右边子树的所有值都必须大于 。$a2$



### 搜索



### 插入

所有的插入都从根节点开始。要插入一个新的元素，首先搜索这棵树找到新元素应该被添加到的对应节点。将新元素插入到这一节点中的步骤如下：

1. 如果节点拥有的元素数量小于最大值，那么有空间容纳新的元素。将新元素插入到这一节点，且保持节点中元素有序。
2. 否则的话这一节点已经满了，将它平均地分裂成两个节点：
   1. 从该节点的原有元素和新的元素中选择出中位数
   2. 小于这一中位数的元素放入左边节点，大于这一中位数的元素放入右边节点，中位数作为分隔值。
   3. 分隔值被插入到父节点中，这可能会造成父节点分裂，分裂父节点时可能又会使它的父节点分裂，以此类推。如果没有父节点（这一节点是根节点），就创建一个新的根节点（增加了树的高度）。

如果分裂一直上升到根节点，那么一个新的根节点会被创建，它有一个分隔值和两个子节点。这就是根节点并不像内部节点一样有最少子节点数量限制的原因。每个节点中元素的最大数量是 *U*-1。当一个节点分裂时，一个元素被移动到它的父节点，但是一个新的元素增加了进来。所以最大的元素数量 *U*-1 必须能够被分成两个合法的节点。如果 *U*-1 是奇数，那么 *U*=2*L* ，总共有 2*L*-1 个元素，一个新的节点有 *L*-1 个元素，另外一个有 *L* 个元素，都是合法的节点。如果 *U*-1 是偶数，那么 *U*=2*L*-1,总共有 2*L*-2 个元素。 一半是 *L*-1，正好是节点允许的最小元素数量。



### 删除




### 复杂度

最佳时间复杂度： $O(log n)$
平均空间复杂度： $O(n)$
最坏空间复杂度： $O(n)$




## 2.  B+ 树







## 3. B* 树





